import{k as e,B as t,a as r,r as a,u as i,j as s,y as o,L as l,A as n,D as d,b as c,d as m,F as u,I as p,S as h,M as b,c as x,f as y,e as f,z as g,g as j,h as v,C as S,i as A,l as I,P as k,m as D,n as w,o as C,T as z,p as q,q as F,R as N}from"./vendor-979adc54.js";import"./__commonjsHelpers__-8b4586d6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const P=e(t)((({theme:e})=>({position:"relative",overflow:"auto",maxWidth:"550px",width:"100%",[e.breakpoints.up("md")]:{maxHeight:"550px",scrollbarWidth:"thin","&::-webkit-scrollbar":{width:"0.4em"},"&::-webkit-scrollbar-track":{background:"#323c41"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#888"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}}))),R=r.create({prefixUrl:"https://run.mocky.io/v3"}),L=Object.freeze({getCity:"9fcb58ca-d3dd-424b-873b-dd3c76f000f4",getDoctorSpecialty:"e8897b19-46a0-4124-8454-0938225ee9ca",getDoctors:"3d1c993c-cd8e-44c3-b1cb-585222859c21"}),T=/^([a-zA-Z]{2,}\s[a-zA-Z]{1,}'?-?[a-zA-Z]{2,}\s?([a-zA-Z]{1,})?)/,$=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g,M=/^($)|(^\d{10}$)/,B=(e,t)=>{const[r,i]=a.useState(),[s,o]=a.useState(!1);return a.useEffect((()=>{(async()=>{try{const r=await R(e,{method:"get",...t}),a=await r.json();i(a)}catch(r){o(!0)}})()}),[]),{data:r,error:s}},E=({label:e,placeholder:t,...r})=>{const[a,l]=i(r),n=l.touched&&l.error;return s.jsx(o,{...a,id:`${e}-outlined-size-small`,label:e,placeholder:t,size:"small",type:"text",InputLabelProps:{shrink:!0},error:!!n,helperText:n||" "})},V=e=>s.jsx(l,{dateAdapter:n,children:s.jsx(d,{...e})}),O=({name:e,label:t})=>{const[r,a]=i(e),o=a.touched&&a.error,{setFieldValue:l,setFieldTouched:n}=c();return s.jsx(V,{label:t,value:r.value,onChange:t=>l(e,t),disableFuture:!0,slotProps:{textField:{helperText:o||" ",error:!!o,onBlur:()=>n(e),id:"outlined-size-small",size:"small",InputLabelProps:{shrink:!0}}}})},W=({name:e,values:t,options:r,doctors:i,specialties:s})=>{const o=a.useMemo((()=>m().diff(t.birthdayDate,"year")),[t.birthdayDate]);if("doctor"===e&&s){return((e,t,r,a)=>{let i=e;return t.city&&(i=i.filter((e=>e.cityId===t.city))),t.doctorSpecialty&&(i=i.filter((e=>e.specialityId===t.doctorSpecialty))),r>=0&&(i=i.filter((e=>{const t=a.find((t=>t.id===e.specialityId));return t?.params?.maxAge?r<t.params?.maxAge:t?.params?.minAge?r>t.params?.minAge:e.isPediatrician===r<16}))),t.sex&&(i=i.filter((e=>{const r=a.find((t=>t.id===e.specialityId));return r?.params?.gender===t.sex||!r?.params?.gender}))),i})(r.map((e=>({...e,name:`${e.name} ${e.surname}`}))),t,o,s)}return"doctorSpecialty"===e&&i?((e,t,r,a)=>{let i=e;if(t.sex&&(i=i.filter((e=>e.params?.gender===t.sex||!e.params?.gender))),r>=0&&(i=i.filter((e=>e.params?.maxAge?r<e.params?.maxAge:!e.params?.minAge||r>e.params?.minAge))),t.city){const e=a.filter((e=>Number.isNaN(r)||r<0?e.cityId===t.city:e.cityId===t.city&&e.isPediatrician===r<16));i=i.filter((t=>e?.some((e=>e.specialityId===t.id))))}return i})(r,t,o,i):r},Z=({options:e,name:t,doctors:r,specialties:o,label:l})=>{const[n,d]=i(t),{values:m,setFieldValue:g,setFieldTouched:j}=c(),{sex:v,birthdayDate:S,doctorSpecialty:A,doctor:I,city:k}=m,D=W({name:t,values:m,options:e,doctors:r,specialties:o}),w=d.touched&&d.error;a.useEffect((()=>{if("doctor"!==t&&"doctorSpecialty"!==t||!n.value)return;D.find((e=>e.id===n.value))||(j(t,!1),g(t,""))}),[v,S,A,I,k]);return s.jsxs(u,{fullWidth:!0,error:!!w,size:"small",children:[s.jsx(p,{id:`${l}simple-select`,children:l}),s.jsx(h,{...n,onChange:e=>{if("doctor"===t){const t=D.find((t=>t.id===e.target.value));k||g("city",t?.cityId),A||g("doctorSpecialty",t?.specialityId)}n.onChange(e)},labelId:`${l}-id`,label:l,disabled:!D.length,endAdornment:s.jsx(b,{sx:{visibility:n.value?"visible":"hidden",marginRight:"7px"},onClick:()=>{j(t,!1),g(t,"")},children:s.jsx(x,{fontSize:"small"})}),children:D.map((e=>s.jsx(y,{value:e.id,children:e.name},e.name)))}),s.jsx(f,{children:w||" "})]})},_=e=>s.jsx(g,{defaultCountry:"UA",onlyCountries:["UA"],placeholder:"Type your number",id:"number-outlined-size-small",label:"Phone Number",size:"small",InputLabelProps:{shrink:!0},forceCallingCode:!0,disableDropdown:!0,...e}),H=({name:e})=>{const[t,r]=i(e),{setFieldValue:a,setFieldTouched:o}=c(),l=r.touched&&r.error;return s.jsx(_,{value:t.value,onBlur:()=>o(e),onChange:t=>a(e,t),error:!!l,helperText:l||" "})},U={name:"",birthdayDate:null,sex:"",city:"",doctorSpecialty:"",doctor:"",email:"",phoneNumber:""},J=j().test("Email or phone","At least one of the email or phone is required",((e,t)=>{const{phoneNumber:r,email:a}=t.parent;return a||r})),K=j().test("Age not more than 110","Invalid Date",((e,t)=>{const r=m().diff(t.originalValue,"year");return r>=0&&r<=110})),G=v().shape({name:j().matches(T,"Invalid name").required("Required"),birthdayDate:K.nullable().required("Required"),sex:j().required("Required"),city:j().required("Required"),doctorSpecialty:j(),doctor:j().required("Required"),email:J.matches($,"Invalid email"),phoneNumber:J.transform((e=>e.replace(e?.split(" ")[0],"").replace(/ /g,""))).matches(M,"Phone number must contain 10 digits")}),Q=[{name:"Male",id:"Male"},{name:"Female",id:"Female"}],X=()=>{const{data:e}=B(L.getDoctorSpecialty),{data:t}=B(L.getCity),{data:r}=B(L.getDoctors);return!e||!t||!r?s.jsx(S,{}):s.jsx(A,{initialValues:U,validationSchema:G,onSubmit:(e,{resetForm:t})=>{t(),console.log(e)},children:({isValid:a})=>s.jsx(P,{children:s.jsx(I,{children:s.jsxs(k,{sx:{display:"flex",width:"100%",flexDirection:"column",padding:"20px",borderRadius:"5px",gap:"20px"},children:[s.jsx(E,{name:"name",label:"Name",type:"text",placeholder:"e.g., John Doe"}),s.jsx(O,{name:"birthdayDate",label:"Birthday Date"}),s.jsx(Z,{name:"sex",options:Q,label:"Sex"}),s.jsx(Z,{name:"city",options:t,label:"City"}),s.jsx(Z,{name:"doctorSpecialty",options:e,doctors:r,label:"Doctor Specialty"}),s.jsx(Z,{name:"doctor",specialties:e,label:"Doctors",options:r}),s.jsx(E,{name:"email",label:"Email",placeholder:"e.g., john.doe@email.com"}),s.jsx(H,{name:"phoneNumber"}),s.jsx(D,{type:"submit",disabled:!a,children:"Submit"})]})})})})},Y=()=>s.jsx(w,{maxWidth:"lg",children:s.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:s.jsx(X,{})})}),ee=C({typography:{fontFamily:"Roboto"},palette:{mode:"dark",background:{default:"#222b36",paper:"#222b36"}},components:{MuiCssBaseline:{styleOverrides:{"*":{boxSizing:"border-box"},html:{height:"100%",width:"100%"},body:{height:"100%"},"#root":{height:"100%"}}}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}}});function te({children:e}){return s.jsxs(z,{theme:ee,children:[s.jsx(q,{}),e]})}function re(){return s.jsx(te,{children:s.jsx(Y,{})})}F.createRoot(document.getElementById("root")).render(s.jsx(N.StrictMode,{children:s.jsx(re,{})}));
